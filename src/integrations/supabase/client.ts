// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from '@/types/supabase';

// Prefer build-time env vars so production keys are injected at build/deploy time.
// Ensure these are set on Vercel (or your hosting) and NOT committed to source.
// Do NOT include secret keys in source. We intentionally do not provide a
// secret fallback here to avoid leaking credentials.
const SUPABASE_URL = (import.meta.env.VITE_SUPABASE_URL as string) ?? '';
const SUPABASE_PUBLISHABLE_KEY = (import.meta.env.VITE_SUPABASE_PUBLISHABLE_KEY as string) ?? '';

// Import the supabase client like this:
// import { supabase } from "@/integrations/supabase/client";

export const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {
  auth: {
    // Persist sessions client-side (localStorage) for client-only auth flow.
    persistSession: true,
    // Let the client automatically refresh access tokens.
    autoRefreshToken: true,
    // Detect sessions on URL after OAuth redirects.
    detectSessionInUrl: true,
  }
});

// Warn in development if env vars are missing so developers notice and set them
// locally (but do not commit secrets to the repository).
if (!SUPABASE_URL || !SUPABASE_PUBLISHABLE_KEY) {
  console.warn('[supabase] Missing VITE_SUPABASE_URL or VITE_SUPABASE_PUBLISHABLE_KEY.\n' +
    'Set these in your .env.local or hosting provider environment variables.\n' +
    'Do NOT commit real keys to source control.');
}